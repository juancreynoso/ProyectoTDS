<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Codigo Assembler</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header>
    <h1>Generación de Código Assembler</h1>
    <nav>
      <ul>
        <li><a href="index.html">Inicio</a></li>
        <li><a href="01_analisis_lexico.html">Análisis Léxico</a></li>
        <li><a href="02_analisis_sintactico.html">Análisis Sintáctico</a></li>
        <li><a href="03_analisis_semantico.html">Análisis Semántico</a></li>
        <li><a href="04_codigo_intermedio.html">Generación de Código Intermedio</a></li>
        <li><a href="05_codigo_objeto.html">Generación de Código Objeto</a></li>
        <li><a href="06_optimizacion.html">Optimización</a></li>
      </ul>
    </nav>
  </header>
  <main>
  <h2>Descripción</h2> 
    <p> La etapa de <b>Generación de Código Objeto</b> tiene como objetivo producir el <b>código assembler</b> a partir de la lista de instrucciones en 
    <b>código de tres direcciones</b> generada en la etapa anterior. <br> 
    Durante esta fase fue necesario asignar <b>offsets</b> tanto a variables locales como a temporales. Los offsets representan 
    la posición que cada identificador ocupará dentro de la <b>pila de ejecución</b>, permitiendo acceder correctamente a sus valores durante la ejecución del programa. </p>
    <h3>Ejemplo offsets</h3>
    <p>
      ...
    </p>
    <br>
    <h3>Un ejemplo de traduccion de <b>codigo tres direcciones</b> a <b>codigo assembler</b></h3>
    <pre>
      PROGRAM
      FUNC loop 
      PARAM a
      L0
      t0 := a GT 0
      ifFalse t0 GOTO L1
      t1 := a SUB 1
      a := t1
      GOTO L0
      L1
      RET a
      FFUNC
      FUNC main 
      LOAD 5
      t2 := CALL loop
      x := t2
      RET x
      FFUNC
      END

    </pre>
    <p>En Assembler:</p>
    <pre>
      .data

      .text
      loop: 
          enter  $24, $0
          mov %rdi, -8(%rbp)
      .L0:
          mov -8(%rbp), %r10
          cmp $0, %r10
          mov $1, %r10
          mov $0, %r11
          cmovg %r10, %r11
          mov %r11, -24(%rbp)
          mov -24(%rbp), %rax
          cmp $0, %rax
          je .L1
          mov -8(%rbp), %r10
          sub $1, %r10
          mov %r10, -16(%rbp)
          mov -16(%rbp), %r10
          mov %r10, -8(%rbp)
          jmp .L0
      .L1:
          mov -8(%rbp), %rax
          leave
          ret
      .globl main
      main: 
          enter  $24, $0
          mov $5, %rdi
          call loop
          mov %rax, -8(%rbp)
          mov -8(%rbp), %r10
          mov %r10, -16(%rbp)
          mov -16(%rbp), %rax
          leave
          ret

    </pre>


    <h2>Decisiones de diseño</h2>
    <p>
      Consideraciones sobre como definir la seccion data.
      Tambien sobre solo permitir variables globales inicializadas con constantes
      setz usado en not
    </p>

    </main>

    <footer>
    <a href="index.html">← Volver al índice</a>
    </footer>
</body>
</html>     